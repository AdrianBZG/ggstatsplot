<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggpiestats • ggstatsplot</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="ggpiestats">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggstatsplot</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/combine_plots.html">combine_plots</a>
    </li>
    <li>
      <a href="../articles/ggbetweenstats.html">ggbetweenstats</a>
    </li>
    <li>
      <a href="../articles/ggcorrmat.html">ggcorrmat</a>
    </li>
    <li>
      <a href="../articles/gghistostats.html">gghistostats</a>
    </li>
    <li>
      <a href="../articles/ggpiestats.html">ggpiestats</a>
    </li>
    <li>
      <a href="../articles/theme_mprl.html">Default theme (theme_mprl)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ggpiestats</h1>
                        <h4 class="author">Indrajeet Patil</h4>
            
            <h4 class="date">2018-05-19</h4>
      
      
      <div class="hidden name"><code>ggpiestats.Rmd</code></div>

    </div>

    
    
<p>The function <code><a href="../reference/ggpiestats.html">ggstatsplot::ggpiestats</a></code> can be used to prepare pie charts to summarize the statistical relationship between two categorical variables. We will see examples of how to use this function in this vignette.</p>
<p>To begin with, here are some instances where you would want to use <code>ggpiestats</code>-</p>
<ul>
<li>to see if the frequency distribution of two categorial variables are independent of each other using the contingency table analysis</li>
<li>to check if the proportion of observations at each level of a categorial variable is equal</li>
</ul>
<p><strong>Note before</strong>: The following demo uses the pipe operator (<code>%&gt;%</code>), so in case you are not familiar with this operator, here is a good explanation: <a href="http://r4ds.had.co.nz/pipes.html" class="uri">http://r4ds.had.co.nz/pipes.html</a></p>
<div id="statistical-independence-of-categorical-variables-with-ggpiestats" class="section level2">
<h2 class="hasAnchor">
<a href="#statistical-independence-of-categorical-variables-with-ggpiestats" class="anchor"></a>Statistical independence of categorical variables with <code>ggpiestats</code>
</h2>
<p>To demonstrate how <code>ggpiestats</code> can be used to we will be using the <code>Titanic</code> dataset that is included in the <code>datasets</code> library. Titanic Passenger Survival Data Set provides information “on the fate of passengers on the fatal maiden voyage of the ocean liner <em>Titanic</em>, summarized according to economic status (class), sex, age, and survival.”</p>
<p>Let’s have a look at the structure of this table and also convert it into a tibble while we are at it.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(datasets)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># looking at the table</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(<span class="dt">x =</span> Titanic)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;  table [1:4, 1:2, 1:2, 1:2] 0 0 35 0 0 0 17 0 118 154 ...</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;  - attr(*, "dimnames")=List of 4</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt;   ..$ Class   : chr [1:4] "1st" "2nd" "3rd" "Crew"</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;   ..$ Sex     : chr [1:2] "Male" "Female"</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;   ..$ Age     : chr [1:2] "Child" "Adult"</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;   ..$ Survived: chr [1:2] "No" "Yes"</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co"># converting to tibble</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/as_tibble">as_data_frame</a></span>(<span class="dt">x =</span> Titanic)</a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; # A tibble: 32 x 5</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;    Class Sex    Age   Survived     n</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  1 1st   Male   Child No           0</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  2 2nd   Male   Child No           0</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;  3 3rd   Male   Child No          35</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;  4 Crew  Male   Child No           0</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt;  5 1st   Female Child No           0</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt;  6 2nd   Female Child No           0</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt;  7 3rd   Female Child No          17</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt;  8 Crew  Female Child No           0</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt;  9 1st   Male   Adult No         118</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; 10 2nd   Male   Adult No         154</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; # ... with 22 more rows</span></a></code></pre></div>
<p>Note that the last column in this dataframe contains count information, which means we will have to modify this dataframe to reflect this count structure.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># a custom function to repeat dataframe `rep` number of times, which is going to</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># be count data for us</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">rep_df &lt;-<span class="st"> </span><span class="cf">function</span>(df, rep) {</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  df[<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(df), rep), ]</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co"># converting dataframe to full length based on count information</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">Titanic_full &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/as_tibble">as_data_frame</a></span>(datasets<span class="op">::</span>Titanic) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/rownames">rowid_to_column</a></span>(<span class="dt">df =</span> ., <span class="dt">var =</span> <span class="st">"id"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise_all.html">mutate_at</a></span>(</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="dt">.tbl =</span> .,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">    <span class="dt">.vars =</span> dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="st">"id"</span>),</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">    <span class="dt">.funs =</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.factor</span>(.)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">  </span>base<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/base/topics/split">split</a></span>(<span class="dt">x =</span> ., <span class="dt">f =</span> .<span class="op">$</span>id) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map_dfr</a></span>(<span class="dt">.x =</span> ., <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">rep_df</span>(<span class="dt">df =</span> ., <span class="dt">rep =</span> .<span class="op">$</span>n)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise_all.html">mutate_at</a></span>(</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    <span class="dt">.tbl =</span> .,</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    <span class="dt">.vars =</span> dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="st">"id"</span>),</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">    <span class="dt">.funs =</span> <span class="op">~</span><span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(.))</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="dt">.data =</span> ., id)</a>
<a class="sourceLine" id="cb2-24" data-line-number="24"></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co"># looking at the final dataset</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26">dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(Titanic_full)</a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; Observations: 2,201</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; Variables: 6</span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; $ id       &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,...</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt; $ Class    &lt;chr&gt; "3rd", "3rd", "3rd", "3rd", "3rd", "3rd", "3rd", "3rd...</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; $ Sex      &lt;chr&gt; "Male", "Male", "Male", "Male", "Male", "Male", "Male...</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; $ Age      &lt;chr&gt; "Child", "Child", "Child", "Child", "Child", "Child",...</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; $ Survived &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No",...</span></a>
<a class="sourceLine" id="cb2-34" data-line-number="34"><span class="co">#&gt; $ n        &lt;dbl&gt; 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 35, 3...</span></a></code></pre></div>
<p>Notice that our final dataset contains information about over 2000 passangers. Now we can start asking interesting question from this dataset.</p>
<p>First, let’s see if the proportion of people who survived was different between sexes using <code>ggpiestats</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(ggstatsplot)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggpiestats">ggpiestats</a></span>(<span class="dt">data =</span> Titanic_full,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                        <span class="dt">condition =</span> Sex,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                        <span class="dt">main =</span> Survived) </a></code></pre></div>
<p><img src="ggpiestats_files/figure-html/ggpiestats1-1.png" width="768"></p>
<p>A number of arguments can be modified to change the appearance of this plot:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(ggstatsplot)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggpiestats">ggpiestats</a></span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="dt">data =</span> Titanic_full,                          <span class="co"># dataframe</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  <span class="dt">main =</span> Survived,                              <span class="co"># rows in the contingency table</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="dt">condition =</span> Sex,                              <span class="co"># columns in the contingecy table</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  <span class="dt">title =</span> <span class="st">"Passengar survival by gender"</span>,       <span class="co"># title for the entire plot</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  <span class="dt">caption =</span> <span class="st">"Source: Titanic survival dataset"</span>, <span class="co"># caption for the entire plot</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  <span class="dt">legend.title =</span> <span class="st">"Survived?"</span>,                   <span class="co"># legend title</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">  <span class="dt">facet.wrap.name =</span> <span class="st">"Gender"</span>,                   <span class="co"># changing the facet wrap title</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11">  <span class="dt">facet.proptest =</span> <span class="ot">TRUE</span>,                        <span class="co"># proportion test for each facet</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">  <span class="dt">stat.title =</span> <span class="st">"survival x gender"</span>              <span class="co"># title for statistical test</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13">) <span class="op">+</span><span class="st">                                             </span><span class="co"># further modification outside of ggstatsplot</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_brewer">scale_fill_brewer</a></span>(<span class="dt">palette =</span> <span class="st">"Dark2"</span>)</a></code></pre></div>
<p><img src="ggpiestats_files/figure-html/ggpiestats2-1.png" width="768"></p>
<p>As seen from this plot, the Pearson’s chi-square test of independence shows that the distribution of survival was different across males and females. Additionally, among both males and females, the proportion of survival was not equally likely (at 50%, i.e.), as shown by significant results (<code>***</code>) from one-sample proportion tests for each facet.</p>
</div>
<div id="within-subjects-designs" class="section level2">
<h2 class="hasAnchor">
<a href="#within-subjects-designs" class="anchor"></a>Within-subjects designs?</h2>
<p>Variant of this function for within-subjects designs, which will display results from McNemar test, is currently under work. You <em>can</em> still use this function just to prepare the <strong>plot</strong> for exploratory data analysis, but the statistical details displayed in the subtitle will be incorrect. You can remove them by adding <code>+ ggplot2::labs(subtitle = NULL)</code>.</p>
</div>
<div id="suggestions" class="section level2">
<h2 class="hasAnchor">
<a href="#suggestions" class="anchor"></a>Suggestions</h2>
<p>If you find any bugs or have any suggestions/remarks, please file an issue on GitHub: <a href="https://github.com/IndrajeetPatil/ggstatsplot/issues" class="uri">https://github.com/IndrajeetPatil/ggstatsplot/issues</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#statistical-independence-of-categorical-variables-with-ggpiestats">Statistical independence of categorical variables with <code>ggpiestats</code></a></li>
      <li><a href="#within-subjects-designs">Within-subjects designs?</a></li>
      <li><a href="#suggestions">Suggestions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Indrajeet Patil.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
