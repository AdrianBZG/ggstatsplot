<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggcoefstats • ggstatsplot</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ggcoefstats">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggstatsplot</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/combine_plots.html">combine_plots</a>
    </li>
    <li>
      <a href="../articles/ggbetweenstats.html">ggbetweenstats</a>
    </li>
    <li>
      <a href="../articles/ggcoefstats.html">ggcoefstats</a>
    </li>
    <li>
      <a href="../articles/ggcorrmat.html">ggcorrmat</a>
    </li>
    <li>
      <a href="../articles/gghistostats.html">gghistostats</a>
    </li>
    <li>
      <a href="../articles/ggpiestats.html">ggpiestats</a>
    </li>
    <li>
      <a href="../articles/ggscatterstats.html">ggscatterstats</a>
    </li>
    <li>
      <a href="../articles/theme_mprl.html">Default theme</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ggcoefstats</h1>
                        <h4 class="author">Indrajeet Patil</h4>
            
            <h4 class="date">2018-07-03</h4>
      
      
      <div class="hidden name"><code>ggcoefstats.Rmd</code></div>

    </div>

    
    
<p>The function <code><a href="../reference/ggcoefstats.html">ggstatsplot::ggcoefstats</a></code> generates <strong>dot-and-whisker plots</strong> of regression models saved in tidy data frames (produced with the <code>broom</code> package). By default, the plot displays <code>95%</code> confidence intervals for the regression coefficients. The function currently supports only those classes of object that are supported by the <code>broom</code> package. For an exhaustive list, see- <a href="https://broom.tidyverse.org/articles/available-methods.html" class="uri">https://broom.tidyverse.org/articles/available-methods.html</a></p>
<p>In this vignette, we will see examples of how to use this function. We will try to cover as many classes of objects as possible. Unfortunately, there is no single dataset that will be helpful for carrying out all types of regression analyses and, therefore, we will use various datasets to explore data-specific hypotheses using regression models.</p>
<p><strong>Note before</strong>: The following demo uses the pipe operator (<code>%&gt;%</code>), so in case you are not familiar with this operator, here is a good explanation: <a href="http://r4ds.had.co.nz/pipes.html" class="uri">http://r4ds.had.co.nz/pipes.html</a></p>
<div id="general-structure-of-the-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#general-structure-of-the-plots" class="anchor"></a>General structure of the plots</h2>
<p>Although the statistical models displayed in the plot may differ based on the class of models being investigated, there are few aspects of the plot that will be invariant across models:</p>
<ul>
<li>The dot-whisker plot containts a dot representing the <strong>estimate</strong> (which can be effect sizes, regression coefficients, etc.) and their <strong>confidence intervals</strong> (<code>95%</code> is the default). The function will also, by default, display a helpful x-axis label that should clear up what estimates are being displayed. The confidence intervals can sometimes be asymmetric if bootstrapping was used.</li>
<li>The caption will always contain diagnostic information about models that can be useful for model selection: The smaller the Akaike’s Information Criterion (<strong>AIC</strong>) and the Bayesian Information Criterion (<strong>BIC</strong>) values, the “better” the model is. Additionally, the higher the <strong>log-likelihood</strong> value the “better” is the model fit.</li>
</ul>
<p>In the following examples, we will try out a number of regression models and, additionally, we will also see how we can change different aspects of the plot itself.</p>
</div>
<div id="omnibus-anova-statsaov" class="section level2">
<h2 class="hasAnchor">
<a href="#omnibus-anova-statsaov" class="anchor"></a>omnibus ANOVA (<code><a href="http://www.rdocumentation.org/packages/stats/topics/aov">stats::aov</a></code>)</h2>
<p>Let’s use the <code>movies_long</code> dataset, which provides information about IMDB ratings, budget, length, MPAA ratings, and genre for a number of movies. Let’s say our hypothesis is that the IMDB rarings for a movie are predicted by a multiplicative effect of the genre and the MPAA rating it got. To begin with, let’s carry out an omnibus ANOVA to see if this is the case.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># looking at the data</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(<span class="dt">x =</span> ggstatsplot<span class="op">::</span>movies_long)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; Observations: 2,433</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; Variables: 8</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; $ title  &lt;fct&gt; Shawshank Redemption, The, Lord of the Rings: The Retur...</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; $ year   &lt;int&gt; 1994, 2003, 2001, 2002, 1994, 1993, 1977, 1980, 1968, 2...</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; $ length &lt;int&gt; 142, 251, 208, 223, 168, 195, 125, 129, 158, 135, 93, 1...</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt; $ budget &lt;dbl&gt; 25.0, 94.0, 93.0, 94.0, 8.0, 25.0, 11.0, 18.0, 5.0, 3.3...</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; $ rating &lt;dbl&gt; 9.1, 9.0, 8.8, 8.8, 8.8, 8.8, 8.8, 8.8, 8.7, 8.7, 8.7, ...</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; $ votes  &lt;int&gt; 149494, 103631, 157608, 114797, 132745, 97667, 134640, ...</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; $ mpaa   &lt;fct&gt; R, PG-13, PG-13, PG-13, R, R, PG, PG, PG-13, R, PG, R, ...</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; $ genre  &lt;fct&gt; Drama, Action, Action, Action, Drama, Drama, Action, Ac...</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co"># plot</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb1-19" data-line-number="19">  <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(</a>
<a class="sourceLine" id="cb1-20" data-line-number="20">    <span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>mpaa <span class="op">*</span><span class="st"> </span>genre,</a>
<a class="sourceLine" id="cb1-21" data-line-number="21">    <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long</a>
<a class="sourceLine" id="cb1-22" data-line-number="22">  ),</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">  <span class="dt">effsize =</span> <span class="st">"omega"</span>,                        <span class="co"># changing the effect size estimate being displayed</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24">  <span class="dt">point.color =</span> <span class="st">"red"</span>,                      <span class="co"># changing the point color</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25">  <span class="dt">point.size =</span> <span class="dv">4</span>,                           <span class="co"># changing the point size</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26">  <span class="dt">point.shape =</span> <span class="dv">15</span>                          <span class="co"># changing the point shape</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27">) <span class="op">+</span><span class="st">                                    </span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="st">  </span><span class="co"># further modification with the ggplot2 commands</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="st">  </span><span class="co"># note the order in which the labels are entered</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_discrete">scale_y_discrete</a></span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"MPAA"</span>, <span class="st">"Genre"</span>, <span class="st">"Interaction term"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">x =</span> <span class="st">"effect size estimate (partial omega-squared)"</span>,</a>
<a class="sourceLine" id="cb1-32" data-line-number="32">                <span class="dt">y =</span> <span class="ot">NULL</span>)</a></code></pre></div>
<p><img src="ggcoefstats_files/figure-html/aov-1.png" width="768"></p>
<p>As this plot shows, there is no interaction effect between these two factors.</p>
<p>Note that we can also use this function for model selection. Let’s try out different models and see how the AIC, BIC, and log-likelihood values change.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(ggstatsplot)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># plot</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/combine_plots">combine_plots</a></span>(</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">  <span class="co"># model 1</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">    <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(<span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>mpaa,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                   <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long),</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="dt">title =</span> <span class="st">"1. Only MPAA ratings"</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  ),</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">    <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(<span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>genre,</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">                   <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long),</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="dt">title =</span> <span class="st">"2. Only genre"</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">  ),</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(<span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>mpaa <span class="op">+</span><span class="st"> </span>genre,</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">                   <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long),</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    <span class="dt">title =</span> <span class="st">"3. Additive effect of MPAA and genre"</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23">  ),</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb2-25" data-line-number="25">    <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(<span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>mpaa <span class="op">*</span><span class="st"> </span>genre,</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">                   <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long),</a>
<a class="sourceLine" id="cb2-27" data-line-number="27">    <span class="dt">title =</span> <span class="st">"4. Multiplicative effect of MPAA and genre"</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28">  ),</a>
<a class="sourceLine" id="cb2-29" data-line-number="29">  <span class="dt">title.text =</span> <span class="st">"Model selection using ggcoefstats"</span>,</a>
<a class="sourceLine" id="cb2-30" data-line-number="30">  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"(a)"</span>, <span class="st">"(b)"</span>, <span class="st">"(c)"</span>, <span class="st">"(d)"</span>)</a>
<a class="sourceLine" id="cb2-31" data-line-number="31">)</a></code></pre></div>
<p><img src="ggcoefstats_files/figure-html/aov2-1.png" width="960"></p>
<p>Looking at the model diagnostics, we can see that the model with only <code>genre</code> as the predictor of ratings seems to perform almost equally well as more complicated additive and multiplicative models. Although there is certainly some improvement with additive and multiplicative, it is by no means convincing enough (e.g., AIC improves by a mere <code>0.09%</code>) for us to abandon a simpler model. This insight can also be garnered by just looking at the effect sizes, which also tell us that which genre the movie belongs to seems to account for the largest variance.</p>
</div>
<div id="linear-model-statslm" class="section level2">
<h2 class="hasAnchor">
<a href="#linear-model-statslm" class="anchor"></a>linear model (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm</a></code>)</h2>
<p>Now that we have figured out that the movie <code>genre</code> best explains variation in how good people find the movie to be. Let’s run a linear regression model to see how different types of genres compare with each other-</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># let's check all the levels for the genre variable</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">levels</span>(ggstatsplot<span class="op">::</span>movies_long<span class="op">$</span>genre)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; [1] "Action"      "Animation"   "Comedy"      "Documentary" "Drama"      </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [6] "Romance"</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># plot</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">    <span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>genre,</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">    <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">  ),</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">  <span class="dt">conf.level =</span> <span class="fl">0.99</span>,                      <span class="co"># changing the confidence levels for confidence intervals</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">  <span class="dt">sort =</span> <span class="st">"ascending"</span>,                     <span class="co"># sorting the terms of the model based on estimate values</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14">  <span class="dt">label.direction =</span> <span class="st">"both"</span>,               <span class="co"># direction in which to adjust position of labels (both x and y)</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15">  <span class="dt">ggtheme =</span> ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_gray</a></span>(),        <span class="co"># changing the default theme</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">  <span class="dt">stats.label.color =</span> <span class="kw">c</span>(<span class="st">"#CC79A7"</span>, <span class="st">"darkgreen"</span>, <span class="st">"#0072B2"</span>, <span class="st">"black"</span>, <span class="st">"red"</span>),</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">  <span class="dt">title =</span> <span class="st">"Movie ratings by their genre"</span>,</a>
<a class="sourceLine" id="cb3-18" data-line-number="18">  <span class="dt">subtitle =</span> <span class="st">"Source: www.imdb.com"</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19">) <span class="op">+</span><span class="st">                                    </span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="st">  </span><span class="co"># further modification with the ggplot2 commands</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="st">  </span><span class="co"># note the order in which the labels are entered</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_discrete">scale_y_discrete</a></span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"Comedy"</span>, <span class="st">"Romance"</span>, <span class="st">"Documentary"</span>, <span class="st">"Animation"</span>, <span class="st">"Drama"</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">y =</span> <span class="st">"genre (comparison level: Action)"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/theme">theme</a></span>(<span class="dt">axis.title.y =</span> ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/element">element_text</a></span>(<span class="dt">size =</span> <span class="dv">14</span>, <span class="dt">face =</span> <span class="st">"bold"</span>))</a></code></pre></div>
<p><img src="ggcoefstats_files/figure-html/lm-1.png" width="768"></p>
<p>As can be seen from the regression coefficients, compared to the action movies, only romantic movies, animated movies, and dramas fare better with the audiences.</p>
</div>
<div id="linear-mixed-effects-model-lme4lmer" class="section level2">
<h2 class="hasAnchor">
<a href="#linear-mixed-effects-model-lme4lmer" class="anchor"></a>linear mixed-effects model (<code><a href="http://www.rdocumentation.org/packages/lme4/topics/lmer">lme4::lmer</a></code>)</h2>
<p>Now let’s say we want to see how movie budget relates to how good the movie is rated to be on IMDB (e.g., more money, better ratings?). But we have reasons to believe that the relationship between these two variables is differnt for different genres (e.g., budget might be a good predictor of how good the movie is rated to be for animations or actions movies as more money can help with better visual effects and animations, but this may not be true for dramas), so we don’t want to use <code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm</a></code>. In this case, therefore, we will be running a linear mixed-effects model (using <code><a href="http://www.rdocumentation.org/packages/lme4/topics/lmer">lme4::lmer</a></code> and p-values generated using the <code>lmerTest</code> package) with a random slope for the genre variable.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(lme4)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw">library</span>(ggstatsplot)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># combining the two different plots</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/combine_plots">combine_plots</a></span>(</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="co"># model 1: simple linear model</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">    <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/lm">lm</a></span>(</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">      <span class="dt">formula =</span> <span class="kw">scale</span>(rating) <span class="op">~</span><span class="st"> </span><span class="kw">scale</span>(budget),</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">      <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">    ),</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">    <span class="dt">title =</span> <span class="st">"linear model"</span>,</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">    <span class="dt">exclude.intercept =</span> <span class="ot">FALSE</span>         <span class="co"># show the intercept</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">x =</span> <span class="kw">parse</span>(<span class="dt">text =</span> <span class="st">"'standardized regression coefficient' ~italic(beta)"</span>)),</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">  <span class="co"># model 2: linear mixed-effects model</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17">  ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">    <span class="dt">x =</span> lme4<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/lme4/topics/lmer">lmer</a></span>(</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">      <span class="dt">formula =</span> rating <span class="op">~</span><span class="st"> </span>budget <span class="op">+</span><span class="st"> </span>(budget <span class="op">|</span><span class="st"> </span>genre),</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">      <span class="dt">data =</span> ggstatsplot<span class="op">::</span>movies_long</a>
<a class="sourceLine" id="cb4-21" data-line-number="21">    ),</a>
<a class="sourceLine" id="cb4-22" data-line-number="22">    <span class="dt">title =</span> <span class="st">"linear mixed-effects model"</span>,</a>
<a class="sourceLine" id="cb4-23" data-line-number="23">    <span class="dt">exclude.intercept =</span> <span class="ot">FALSE</span>,       <span class="co"># show the intercept</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24">    <span class="dt">conf.method =</span> <span class="st">"profile"</span>,         <span class="co"># chaning default method for computing confidence intervals</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25">    <span class="dt">effects =</span> <span class="kw">c</span>(<span class="st">"ran_pars"</span>, <span class="st">"fixed"</span>)   <span class="co"># show both fixed and random effects</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26">  ) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/labs">labs</a></span>(<span class="dt">x =</span> <span class="kw">parse</span>(<span class="dt">text =</span> <span class="st">"'standardized regression coefficient' ~italic(beta)"</span>)),</a>
<a class="sourceLine" id="cb4-28" data-line-number="28">  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"(a)"</span>, <span class="st">"(b)"</span>),</a>
<a class="sourceLine" id="cb4-29" data-line-number="29">  <span class="dt">nrow =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb4-30" data-line-number="30">  <span class="dt">ncol =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb4-31" data-line-number="31">  <span class="dt">title.text =</span> <span class="st">"Relationship between movie budget and its IMDB rating"</span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32">)</a></code></pre></div>
<p><img src="ggcoefstats_files/figure-html/lmer-1.png" width="768"></p>
<p>As can be seen from these plots, although there seems to be a really small correlation between budget and rating, this effect is not found once we take into account the random effects.</p>
</div>
<div id="repeated-measures-anova-aovlist" class="section level2">
<h2 class="hasAnchor">
<a href="#repeated-measures-anova-aovlist" class="anchor"></a>Repeated measures ANOVA (<code>aovlist</code>)</h2>
<p>Let’s now to run a different type of analysis: repeated measures design.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># for reproducibility</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co"># converting the iris dataset to long format</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">iris_long &lt;-<span class="st"> </span>datasets<span class="op">::</span>iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">.data =</span> ., <span class="dt">id =</span> dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span>(<span class="dt">x =</span> Species)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/gather">gather</a></span>(</a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="dt">data =</span> .,</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    <span class="dt">key =</span> <span class="st">"condition"</span>,</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">    <span class="dt">value =</span> <span class="st">"value"</span>,</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">    Sepal.Length<span class="op">:</span>Petal.Width,</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">    <span class="dt">convert =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">    <span class="dt">factor_key =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/separate">separate</a></span>(</a>
<a class="sourceLine" id="cb5-18" data-line-number="18">    <span class="dt">col =</span> <span class="st">"condition"</span>,</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">    <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">"attribute"</span>, <span class="st">"measure"</span>),</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">    <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\\</span><span class="st">."</span>,</a>
<a class="sourceLine" id="cb5-21" data-line-number="21">    <span class="dt">convert =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22">  ) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/tibble/topics/as_tibble">as_data_frame</a></span>(<span class="dt">x =</span> .)</a>
<a class="sourceLine" id="cb5-24" data-line-number="24"></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co"># looking at the data</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26">dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">glimpse</a></span>(<span class="dt">x =</span> iris_long)</a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; Observations: 600</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt; Variables: 5</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; $ Species   &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, seto...</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt; $ id        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1...</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; $ attribute &lt;chr&gt; "Sepal", "Sepal", "Sepal", "Sepal", "Sepal", "Sepal"...</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt; $ measure   &lt;chr&gt; "Length", "Length", "Length", "Length", "Length", "L...</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; $ value     &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5....</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co"># specifying the model</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36">ggstatsplot<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggstatsplot/topics/ggcoefstats">ggcoefstats</a></span>(</a>
<a class="sourceLine" id="cb5-37" data-line-number="37">  <span class="dt">x =</span> stats<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/stats/topics/aov">aov</a></span>(<span class="dt">formula =</span> value <span class="op">~</span><span class="st"> </span>attribute <span class="op">*</span><span class="st"> </span>measure <span class="op">+</span><span class="st"> </span><span class="kw">Error</span>(id <span class="op">/</span><span class="st"> </span>(attribute <span class="op">*</span><span class="st"> </span>measure)),</a>
<a class="sourceLine" id="cb5-38" data-line-number="38">             <span class="dt">data =</span> iris_long)</a>
<a class="sourceLine" id="cb5-39" data-line-number="39">)</a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt; Note: No model diagnostics information available for the object of class aovlist . Future release might support this.</span></a></code></pre></div>
<p><img src="ggcoefstats_files/figure-html/aovlist-1.png" width="768"></p>
</div>
<div id="suggestions" class="section level2">
<h2 class="hasAnchor">
<a href="#suggestions" class="anchor"></a>Suggestions</h2>
<p>If you find any bugs or have any suggestions/remarks, please file an issue on GitHub: <a href="https://github.com/IndrajeetPatil/ggstatsplot/issues" class="uri">https://github.com/IndrajeetPatil/ggstatsplot/issues</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#general-structure-of-the-plots">General structure of the plots</a></li>
      <li><a href="#omnibus-anova-statsaov">omnibus ANOVA (<code><a href="http://www-rdocumentation-org/packages/stats/topics/aov">stats::aov</a></code>)</a></li>
      <li><a href="#linear-model-statslm">linear model (<code><a href="http://www-rdocumentation-org/packages/stats/topics/lm">stats::lm</a></code>)</a></li>
      <li><a href="#linear-mixed-effects-model-lme4lmer">linear mixed-effects model (<code><a href="http://www-rdocumentation-org/packages/lme4/topics/lmer">lme4::lmer</a></code>)</a></li>
      <li><a href="#repeated-measures-anova-aovlist">Repeated measures ANOVA (<code>aovlist</code>)</a></li>
      <li><a href="#suggestions">Suggestions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Indrajeet Patil.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
